<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="./../../WEB-INF/template/generalTemplate2.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="body">
        <p:panel header="Dérnières Notifications">

            <h:form id="form1">
                <p:messages id="messages" globalOnly="true"/>
                <p:spacer width="10"/>
                <h:panelGrid width="100%">
                    <p:spacer height="7" />
                    <p:dataTable id="datatable"  var="notification" value="#{notificationController.backendUserNotifications}"  paginator="true" rows="10"  
                                 paginatorPosition="bottom">  
                        <f:facet name="header" >
                            Liste des notifications
                        </f:facet>
                        <p:column  style="width:10%">
                            <center>
                                <p:graphicImage value="/resources/images/constellation/icons/fugue/readed-mail.png"  width="24" height="24" rendered="#{notification.readed}"/>  
                                <p:graphicImage value="/resources/images/constellation/icons/fugue/unreaded-mail.png"  width="24" height="24" rendered="#{not notification.readed}"/>  
                            </center>
                        </p:column> 
                        <p:column headerText="Contenu" style="width:50%">  
                            <h:outputText value="#{notification.content}" />  
                        </p:column>  
                        <p:column headerText="Type" style="width:10%">  
                            <h:outputText value="#{notification.type}" />  
                        </p:column>  
                        <p:column headerText="Consulter" style="width:10%">  
                            <p:commandLink value="consulter" ajax="false" action="#{notificationController.consult(notification)}" >
                                <f:param name="id" value="#{notificationController.id}" />
                            </p:commandLink>  
                        </p:column>  
                    </p:dataTable>
                </h:panelGrid>
            </h:form>
        </p:panel>
    </ui:define>
</ui:composition>
